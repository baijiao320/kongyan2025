<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大学宿舍厕所吸烟现状数据可视化报告</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #1a6dcc, #0d4a9e);
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .summary {
            background-color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #1a6dcc;
        }
        
        .summary h2 {
            color: #1a6dcc;
            margin-bottom: 15px;
        }
        
        .summary p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .highlight {
            background-color: #e6f0ff;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            color: #0d4a9e;
            display: inline-block;
            margin: 5px 0;
        }
        
        .charts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(550px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        
        .chart-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .chart-header h3 {
            color: #1a6dcc;
            font-size: 1.4rem;
        }
        
        .btn-download {
            background-color: #1a6dcc;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }
        
        .btn-download:hover {
            background-color: #0d4a9e;
        }
        
        .chart-container {
            height: 300px;
            position: relative;
        }
        
        .insights {
            margin-top: 15px;
            padding: 15px;
            background-color: #f8f9ff;
            border-radius: 5px;
            border-left: 3px solid #1a6dcc;
        }
        
        .insights h4 {
            color: #1a6dcc;
            margin-bottom: 8px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            margin-top: 30px;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>大学宿舍厕所吸烟现状数据可视化报告</h1>
            <p>基于195份有效问卷的数据分析 - 2025年6月</p>
        </header>
        
        <div class="summary">
            <h2>核心发现摘要</h2>
            <p><span class="highlight">59%的学生（115人）</span>曾在宿舍厕所遭遇二手烟困扰，其中24.1%面临<span class="highlight">高频困扰</span>（每周3次以上或每天）。</p>
            <p>厕所吸烟的<span class="highlight">两大主因</span>是烟瘾发作需求（80.5%）和缺乏监管（71.3%）。</p>
            <p><span class="highlight">79.5%的学生支持</span>安装智能禁烟设备，但71.8%强调应由校方承担费用。</p>
            <p>学生最认可的禁烟措施是<span class="highlight">加重罚款（平均排名1.6）</span>，而教育类措施（张贴警示）被认为效果最差。</p>
        </div>
        
        <div class="charts-container">
            <!-- 图表1：二手烟遭遇频率 -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>宿舍厕所二手烟遭遇频率</h3>
                    <button class="btn-download" onclick="downloadChart('chart1', '二手烟遭遇频率.png')">下载图表</button>
                </div>
                <div class="chart-container">
                    <canvas id="chart1"></canvas>
                </div>
                <div class="insights">
                    <h4>关键洞察</h4>
                    <p>女性报告高频困扰比例(68%)显著高于男性(52%)，可能因女性对烟雾更敏感或厕所使用模式差异。</p>
                </div>
            </div>
            
            <!-- 图表2：厕所吸烟原因分析 -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>厕所吸烟现象主要原因分析</h3>
                    <button class="btn-download" onclick="downloadChart('chart2', '吸烟原因分析.png')">下载图表</button>
                </div>
                <div class="chart-container">
                    <canvas id="chart2"></canvas>
                </div>
                <div class="insights">
                    <h4>关键洞察</h4>
                    <p>高频困扰者(每周≥3次)更倾向归因于"缺乏监管"(85%)，而低频困扰者归因更均衡。</p>
                </div>
            </div>
            
            <!-- 图表3：智能设备支持度 -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>智能禁烟设备支持度分布</h3>
                    <button class="btn-download" onclick="downloadChart('chart3', '设备支持度.png')">下载图表</button>
                </div>
                <div class="chart-container">
                    <canvas id="chart3"></canvas>
                </div>
                <div class="insights">
                    <h4>关键洞察</h4>
                    <p>18-22岁学生中75%要求"校方出资安装设备"，26岁以上组30%选择"无所谓"。</p>
                </div>
            </div>
            
            <!-- 图表4：禁烟措施有效性排序 -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>禁烟措施有效性排序</h3>
                    <button class="btn-download" onclick="downloadChart('chart4', '禁烟措施排序.png')">下载图表</button>
                </div>
                <div class="chart-container">
                    <canvas id="chart4"></canvas>
                </div>
                <div class="insights">
                    <h4>关键洞察</h4>
                    <p>58.5%的学生将"加重罚款"排在第1位，仅32.3%将"增设通风设备"排在第2位。</p>
                </div>
            </div>
            
            <!-- 图表5：学生参与禁烟行动意愿 -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>学生参与禁烟行动意愿</h3>
                    <button class="btn-download" onclick="downloadChart('chart5', '参与意愿.png')">下载图表</button>
                </div>
                <div class="chart-container">
                    <canvas id="chart5"></canvas>
                </div>
                <div class="insights">
                    <h4>关键洞察</h4>
                    <p>学生更倾向低门槛参与方式(线上宣传和匿名建议)，而直接监督和座谈会参与意愿较低。</p>
                </div>
            </div>
            
            <!-- 图表6：建议措施分类 -->
            <div class="chart-card">
                <div class="chart-header">
                    <h3>学生建议的禁烟措施分类</h3>
                    <button class="btn-download" onclick="downloadChart('chart6', '建议措施.png')">下载图表</button>
                </div>
                <div class="chart-container">
                    <canvas id="chart6"></canvas>
                </div>
                <div class="insights">
                    <h4>关键洞察</h4>
                    <p>学生建议强调经济处罚(罚款)和技术手段(报警器)的实用性，部分建议平衡禁烟与需求(如设吸烟区)。</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>数据来源：195份有效问卷 | 分析日期：2025年6月27日</p>
            <p>© 2025 校园健康研究项目 | 数据可视化报告</p>
        </footer>
    </div>

    <script>
        // 模拟下载功能（在实际应用中需要实现真实的图表下载）
        function downloadChart(chartId, fileName) {
            alert(`图表 "${fileName}" 下载功能已触发。\n在实际应用中，这里会实现真实的图表下载功能。`);
        }

        // 初始化图表
        document.addEventListener('DOMContentLoaded', function() {
            // 图表1：二手烟遭遇频率
            const ctx1 = document.getElementById('chart1').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ['从未', '偶尔', '一周3次以上', '每天三次以上'],
                    datasets: [{
                        label: '遭遇比例',
                        data: [41.0, 34.9, 12.3, 11.8],
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(255, 159, 64, 0.7)',
                            'rgba(255, 99, 132, 0.7)'
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(255, 99, 132, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '百分比 (%)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.parsed.y}% (${Math.round(195 * context.parsed.y/100)}人)`;
                                }
                            }
                        }
                    }
                }
            });

            // 图表2：厕所吸烟原因分析
            const ctx2 = document.getElementById('chart2').getContext('2d');
            new Chart(ctx2, {
                type: 'radar',
                data: {
                    labels: ['烟瘾发作需求', '缺乏监管', '从众心理', '禁烟标识不醒目'],
                    datasets: [{
                        label: '选择比例',
                        data: [80.5, 71.3, 44.6, 43.6],
                        fill: true,
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgb(54, 162, 235)',
                        pointBackgroundColor: 'rgb(54, 162, 235)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(54, 162, 235)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.parsed.r}%`;
                                }
                            }
                        }
                    }
                }
            });

            // 图表3：智能设备支持度
            const ctx3 = document.getElementById('chart3').getContext('2d');
            new Chart(ctx3, {
                type: 'pie',
                data: {
                    labels: ['支持但希望校方出资', '无所谓', '全力支持并愿分摊费用', '反对(隐私担忧)'],
                    datasets: [{
                        data: [71.8, 15.9, 7.7, 4.6],
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(201, 203, 207, 0.7)',
                            'rgba(75, 192, 192, 0.7)',
                            'rgba(255, 99, 132, 0.7)'
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(201, 203, 207, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(255, 99, 132, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed || 0;
                                    return `${label}: ${value}%`;
                                }
                            }
                        }
                    }
                }
            });

            // 图表4：禁烟措施有效性排序
            const ctx4 = document.getElementById('chart4').getContext('2d');
            new Chart(ctx4, {
                type: 'bar',
                data: {
                    labels: ['加重罚款', '增设通风设备', '实名举报制度', '定期张贴警示内容'],
                    datasets: [{
                        label: '平均排名 (1=最有效)',
                        data: [1.6, 2.2, 2.8, 3.4],
                        backgroundColor: 'rgba(54, 162, 235, 0.7)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            reverse: true,
                            min: 1,
                            max: 4,
                            title: {
                                display: true,
                                text: '排名 (数值越低越有效)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                title: function(tooltipItems) {
                                    return tooltipItems[0].label;
                                },
                                label: function(context) {
                                    return `平均排名: ${context.parsed.x}`;
                                }
                            }
                        }
                    }
                }
            });

            // 图表5：学生参与禁烟行动意愿
            const ctx5 = document.getElementById('chart5').getContext('2d');
            new Chart(ctx5, {
                type: 'bar',
                data: {
                    labels: ['提供改进建议', '参与线上宣传', '成为禁烟监督员', '参加座谈会', '不参与'],
                    datasets: [{
                        label: '选择比例 (%)',
                        data: [62.1, 60.0, 47.2, 40.0, 7.7],
                        backgroundColor: 'rgba(75, 192, 192, 0.7)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 70,
                            title: {
                                display: true,
                                text: '百分比 (%)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // 图表6：建议措施分类
            const ctx6 = document.getElementById('chart6').getContext('2d');
            new Chart(ctx6, {
                type: 'doughnut',
                data: {
                    labels: ['监管与处罚', '教育与宣传', '技术手段', '设施优化'],
                    datasets: [{
                        data: [40, 30, 20, 10],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.7)',
                            'rgba(54, 162, 235, 0.7)',
                            'rgba(255, 206, 86, 0.7)',
                            'rgba(75, 192, 192, 0.7)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed}%`;
                                }
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>